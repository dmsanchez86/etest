"use strict";(self.webpackChunkappgastos_frontend=self.webpackChunkappgastos_frontend||[]).push([[497],{6497:(X,x,o)=>{o.r(x),o.d(x,{HeritageModule:()=>G});var p=o(4364),f=o(5709),S=o(7787),e=o(2316);let y=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-start-heritage"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[f.lC],encapsulation:2}),r})();var Z=o(2269),v=o(9369),a=o(335),H=o(1318),d=o(4693),C=o(5540),T=o(3380),A=o(5409),b=o(3802);const _=["value"];function w(r,s){if(1&r&&(e.TgZ(0,"b"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij("(",null==t.user||null==t.user.heritages||null==t.user.heritages.data?null:t.user.heritages.data.length,")")}}function J(r,s){if(1&r&&(e.TgZ(0,"div"),e.TgZ(1,"h1",15),e.YNc(2,w,2,1,"b",13),e._uU(3," All Your Heritage "),e.TgZ(4,"b"),e._uU(5),e.ALo(6,"currency"),e.qZA(),e.qZA(),e._UZ(7,"app-heritage-person",16),e.qZA()),2&r){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",null==t.user||null==t.user.heritages||null==t.user.heritages.data?null:t.user.heritages.data.length),e.xp6(3),e.Oqu(e.gM2(6,7,null==t.user||null==t.user.heritages?null:t.user.heritages.total,"$","symbol","4.0")),e.xp6(2),e.Q6J("showHeader",!1)("showLink",!1)("showDelete",!0)("padding",!1)("limit",20)}}function U(r,s){1&r&&(e.TgZ(0,"div",17),e._uU(1," There're nothing to see in your "),e.TgZ(2,"b"),e._uU(3,"Heritage"),e.qZA(),e.qZA())}let I=(()=>{class r{constructor(t,n){this.HeritageService=t,this.store=n,this.details=!0,this.form=new a.cw({}),this.sus=new H.w,this.user={},this.date=(0,b.b3)(),this.sus=this.store.subscribe(i=>{this.user=i.user.data})}ngOnInit(){var t=this;return(0,v.Z)(function*(){t.form=new a.cw({value:new a.NI("",a.kI.required),name:new a.NI("")}),setTimeout(()=>{var n;return null===(n=t.value)||void 0===n?void 0:n.nativeElement.focus()},300)})()}ngOnDestroy(){this.sus.unsubscribe()}createHeritage(){var t=this;return(0,v.Z)(function*(){var n,i,l;if(t.form.valid){let{value:u,name:m}=t.form.controls;try{let c={value:u.value,name:m.value,person:null===(i=null===(n=t.user)||void 0===n?void 0:n.person)||void 0===i?void 0:i.id},h=yield t.HeritageService.createHeritage(c);h.heritage?(t.form.reset(),null===(l=t.value)||void 0===l||l.nativeElement.focus(),h.heritages&&t.store.dispatch((0,d.t2)({heritages:h.heritages}))):console.log("registro fallido")}catch(c){console.log("error => ",c)}}})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(T.i),e.Y36(C.yh))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-create-heritage"]],viewQuery:function(t,n){if(1&t&&e.Gf(_,7),2&t){let i;e.iGM(i=e.CRH())&&(n.value=i.first)}},inputs:{details:"details"},decls:18,vars:3,consts:[[1,"container","pt-5","mx-auto"],[1,"grid","gap-4"],[1,"pt-5","mx-auto"],[1,"text-center","font-bold","text-2xl","mt-7","mb-5"],[1,"icon-note","mr-2"],[1,"grid","sm:col-span-2","md:grid-cols-3","gap-4",3,"formGroup","ngSubmit"],[1,"w-full","sm:col-span-2"],["type","text","placeholder","name","formControlName","name",1,"w-full","p-2","mb-2"],["value",""],[1,"w-full","sm:col-span-2","md:col-span-1"],["type","number","placeholder","Value","formControlName","value",1,"w-full","p-2","mb-2"],[1,"w-full","sm:col-span-2","md:col-span-3"],["type","submit",1,"btn-form"],[4,"ngIf"],["class","text-center text-xl py-2 mt-6 font-semibold",4,"ngIf"],[1,"text-center","text-2xl","mt-7","mb-5"],[3,"showHeader","showLink","showDelete","padding","limit"],[1,"text-center","text-xl","py-2","mt-6","font-semibold"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div"),e.TgZ(3,"div",2),e.TgZ(4,"h1",3),e._UZ(5,"span",4),e._uU(6," Create Heritage"),e.qZA(),e.TgZ(7,"form",5),e.NdJ("ngSubmit",function(){return n.createHeritage()}),e.TgZ(8,"div",6),e._UZ(9,"input",7,8),e.qZA(),e.TgZ(11,"div",9),e._UZ(12,"input",10),e.qZA(),e.TgZ(13,"div",11),e.TgZ(14,"button",12),e._uU(15,"Create"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(16,J,8,12,"div",13),e.YNc(17,U,4,0,"div",14),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("formGroup",n.form),e.xp6(9),e.Q6J("ngIf",(null==n.user||null==n.user.heritages||null==n.user.heritages.data?null:n.user.heritages.data.length)&&n.details),e.xp6(1),e.Q6J("ngIf",!(null!=n.user&&null!=n.user.heritages&&null!=n.user.heritages.data&&n.user.heritages.data.length)))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.wV,p.O5,Z.J],pipes:[p.H9],encapsulation:2}),r})();function N(r,s){1&r&&(e.TgZ(0,"span"),e._UZ(1,"span",16),e._uU(2," Change State"),e.qZA())}function q(r,s){1&r&&(e.TgZ(0,"span"),e._UZ(1,"span",17),e._uU(2," Save Data"),e.qZA())}const F=function(r,s){return{"bg-noti hover:bg-purple-900":r,"bg-green hover:bg-green-900":s}};function Y(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.TgZ(2,"form",4),e.TgZ(3,"div",5),e.TgZ(4,"h1",6),e.TgZ(5,"b"),e._uU(6),e.qZA(),e._uU(7," total items in your Heritage = "),e.TgZ(8,"b"),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"input",8),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().heritagesFilter()}),e.qZA(),e.qZA(),e.TgZ(13,"div",9),e.TgZ(14,"label"),e.TgZ(15,"input",10),e.NdJ("change",function(){return e.CHM(t),e.oxw().heritagesFilter()}),e.qZA(),e._uU(16," Active "),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.statesItems(i.user)}),e.YNc(19,N,3,0,"span",13),e.YNc(20,q,3,0,"span",13),e.qZA(),e.qZA(),e.TgZ(21,"div",14),e._UZ(22,"app-heritage-person",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(4),e.hij("(",null==t.user||null==t.user.heritages||null==t.user.heritages.data?null:t.user.heritages.data.length,")"),e.xp6(3),e.Oqu(e.gM2(10,12,null==t.user||null==t.user.heritages?null:t.user.heritages.total,"$","symbol","4.0")),e.xp6(9),e.Q6J("ngClass",e.WLB(17,F,!t.updateState,t.updateState)),e.xp6(1),e.Q6J("ngIf",!t.updateState),e.xp6(1),e.Q6J("ngIf",t.updateState),e.xp6(2),e.Q6J("showHeader",!1)("showLink",!1)("showDelete",!0)("padding",!1)("updateState",t.updateState)("limit",500)}}const M=[{path:"",component:y,canActivate:[S.s],children:[{path:"",component:Z.J},{path:"create",component:(()=>{class r{constructor(t,n,i){this.store=t,this.HeritageService=n,this.actions=i,this.user={},this.form=new a.cw({}),this.updateState=!1,this.susA=new H.w,this.sub=new H.w,this.yearValue=(new Date).getFullYear(),this.susA=this.actions.subscribe(l=>{"[User] UpdateStatesHeritage"===l.type&&this.buildForm()}),this.sub=this.store.select(l=>{var u;return null===(u=null==l?void 0:l.user)||void 0===u?void 0:u.data}).subscribe(l=>{try{this.user=l}catch(u){console.log(u)}}),this.buildForm()}ngOnDestroy(){this.susA.unsubscribe()}ngOnInit(){this.heritagesFilter()}buildForm(){this.form=new a.cw({search:new a.NI("",a.kI.required),active:new a.NI(!0,a.kI.required)})}heritagesFilter(){var t=this;return(0,v.Z)(function*(){var n,i,l,u,m,c;localStorage.itemsStatesHeritage=JSON.stringify([]),t.updateState=!1;let h={};if(t.form.controls.search.value||null!==t.form.controls.active.value){h={search:t.form.controls.search.value,active:t.form.controls.active.value,person:null===(i=null===(n=t.user)||void 0===n?void 0:n.person)||void 0===i?void 0:i.id};let g=yield t.HeritageService.searchHeritages(h);return console.log(g),void t.store.dispatch((0,d.t2)({heritages:g}))}if(t.form.controls.search.value);else try{let g=yield t.HeritageService.heritages((null===(u=null===(l=t.user)||void 0===l?void 0:l.person)||void 0===u?void 0:u.id)?""+(null===(c=null===(m=t.user)||void 0===m?void 0:m.person)||void 0===c?void 0:c.id):"");g.heritages.length&&t.store.dispatch((0,d.t2)({heritages:g}))}catch(g){}})()}statesItems(t){var n=this;return(0,v.Z)(function*(){if(console.log(t),n.updateState&&(null==localStorage?void 0:localStorage.itemsStatesHeritage))try{const i=JSON.parse(null==localStorage?void 0:localStorage.itemsStatesHeritage);if(i.length){const l=n.HeritageService.updateStates(i);console.log(l),l&&(localStorage.itemsStatesHeritage=JSON.stringify([]),n.store.dispatch((0,d.t2)({heritages:[]})),n.store.dispatch((0,d.ZV)()))}}catch(i){}n.updateState=!n.updateState})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C.yh),e.Y36(T.i),e.Y36(A.eX))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-heritage"]],decls:2,vars:2,consts:[[3,"details"],["class","container pt-5 mx-auto",4,"ngIf"],[1,"container","pt-5","mx-auto"],[1,"grid","gap-4"],[3,"formGroup"],[1,"grid","grid-cols-3","gap-x-8"],[1,"text-center","text-2xl","mt-7","mb-5","col-span-3"],[1,"text-right","my-2"],["type","search","placeholder","Search Heritage for Name","formControlName","search",1,"w-full","py-1","px-3",3,"keyup.enter"],[1,"flex","items-center"],["type","checkbox","name","active","formControlName","active","checked","true",3,"change"],[1,"flex","items-end","justify-end"],[1,"p-1","px-3","text-white","transition-all","rounded-md","mb-2","text-sm",3,"ngClass","click"],[4,"ngIf"],[1,"col-span-3"],[3,"showHeader","showLink","showDelete","padding","updateState","limit"],[1,"icon-bell"],[1,"icon-bell-o"]],template:function(t,n){1&t&&(e._UZ(0,"app-create-heritage",0),e.YNc(1,Y,23,20,"div",1)),2&t&&(e.Q6J("details",!1),e.xp6(1),e.Q6J("ngIf",null==n.user||null==n.user.heritages||null==n.user.heritages.data?null:n.user.heritages.data.length))},directives:[I,p.O5,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.Wl,p.mk,Z.J],pipes:[p.H9],encapsulation:2}),r})()}]}];let O=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[f.Bz.forChild(M)],f.Bz]}),r})();var L=o(881),D=o(8379),j=o(4664);let G=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[p.ez,a.u5,a.UX,D.A0,j.X,O,L.m]]}),r})()}}]);
//# sourceMappingURL=497.6e7b98ed409fbded0a33.js.map