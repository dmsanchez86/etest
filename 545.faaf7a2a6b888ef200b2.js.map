{"version":3,"mappings":"iTAIMA,EAAiB,CAAC,CAAEC,KAAM,GAAIC,UCUpC,MAAM,QAIJC,YACUC,EACAC,EACAC,EACAC,GAHAC,mBACAA,mBACAA,aACAA,cANVA,UAAkB,GAQbC,aAAaC,OACdF,KAAKG,OAAOC,cAAc,cAG5BJ,KAAKG,OAAOE,YAAYC,KAAKC,YAAYC,UAAWC,IAC/CA,EAAOC,OACRV,KAAKU,KAAOD,EAAOC,QAKzBC,WACEX,KAAKY,KAAO,IAAIC,KAAU,CACxBH,KAAM,IAAIG,MAAkC,iBAAdb,KAAKU,KAAoBV,KAAKU,KAAO,KAAO,GAAIG,eAC9EC,SAAU,IAAID,KAAY,GAAIA,iBAI5BX,QAAK,qCAIT,GAFAN,EAAKmB,MAAMC,UAAS,WAEhBpB,EAAKgB,KAAKK,MAAO,CACnB,IAAMP,OAAMI,YAAalB,EAAKgB,KAAKM,SAE/BnB,EAAO,CAAEW,KAAMb,EAAKsB,MAAOL,SAAUhB,EAASqB,OAClD,IACE,IAAIV,QAAsBb,EAAKwB,YAAYlB,MAAMH,GAEjD,GAAIsB,OAAOC,KAAKb,GAAUc,OAAQ,CAEhC,IACE,IAAIC,QAA4B5B,EAAK6B,YAAYC,OAAOjB,EAASkB,IAC9DN,OAAOC,KAAKE,GAAgBD,QAC7B3B,EAAKmB,MAAMC,YAASY,MAAW,CAAEC,IAAKL,WAIjCA,GACPM,QAAQC,MAAM,gBAGhBnC,EAAKmB,MAAMC,YAASY,MAAa,CAAEC,IAAKpB,KACxCb,EAAKO,OAAOC,cAAc,mBAE1BR,EAAKmB,MAAMC,YAASY,MAAU,CAAEC,IAAKpB,KACrCuB,SAAU,0BAA2B,GAAI,eAEpCvB,GACPqB,QAAQC,MAAM,YAAatB,GAC3Bb,EAAKmB,MAAMC,YAASY,MAAU,CAAEC,IAAKpB,QAhChC,iDA5BAwB,GAAcC,wEAAdD,EAAcE,spBCd3BD,iBACEA,kBAAmDA,mCAAYrC,YAC7DqC,iBACEA,kBACFA,QACAA,iBACEA,eACEA,mBACFA,QACAA,eACEA,mBACFA,QACFA,QACAA,oBAAsFA,mBAAMA,QAE5FA,kBACEA,gBAAsDA,qBAAQA,QAChEA,QACFA,QACFA,eAlBkCA,mCAeHA,4GDFlBD,GAAb,KDJO,IAAMG,EAAb,MAAM,sDAAOH,4DAHF,CAACI,cAAsB7C,IACtB6C,QAECJ,GAAb,GGQaK,EAAb,MAAM,sDAAOL,4DANF,CACPM,KACAH,EACAvB,SAGSoB,GAAb","names":["S","path","component","constructor","t","a","c","d","this","localStorage","login","router","navigateByUrl","routerState","root","queryParams","subscribe","s","user","ngOnInit","form","n","password","store","dispatch","valid","controls","value","authService","Object","keys","length","g","userService","person","id","u","any","console","error","v","r","e","selectors","T","l","x","m"],"sources":["./src/app/pages/login/login-routing.module.ts","./src/app/pages/login/login.component.ts","./src/app/pages/login/login.component.html","./src/app/pages/login/login.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { LoginComponent } from './login.component';\r\n\r\nconst routes: Routes = [{ path: '', component: LoginComponent }];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class LoginRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { IUserData } from 'src/app/interfaces/user';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { DataPerson, Login, LoginFail, LoginSuccess } from 'src/app/store/actions/user';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html'\r\n})\r\nexport class LoginComponent implements OnInit {\r\n  form: any;\r\n  user: IUserData = {};\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private userService: UserService,\r\n    private store: Store<Store>,\r\n    private router: Router\r\n  ) {\r\n    if(localStorage.login){\r\n      this.router.navigateByUrl('/dashboard');\r\n    }\r\n    // detect params user from router\r\n    this.router.routerState.root.queryParams.subscribe((params: any) => {\r\n      if(params.user){\r\n        this.user = params.user;\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.form = new FormGroup({\r\n      user: new FormControl((typeof this.user === 'string' ? this.user : '') || '', Validators.required),\r\n      password: new FormControl('', Validators.required),\r\n    });\r\n  }\r\n\r\n  async login() {\r\n\r\n    this.store.dispatch(Login());\r\n\r\n    if (this.form.valid) {\r\n      let { user, password } = this.form.controls;\r\n\r\n      let data = { user: user.value, password: password.value };\r\n      try {\r\n        let response: any = await this.authService.login(data);\r\n\r\n        if (Object.keys(response).length) {\r\n          \r\n          try {\r\n            let responsePerson: any = await this.userService.person(response.id);\r\n            if(Object.keys(responsePerson).length){\r\n              this.store.dispatch(DataPerson({ any: responsePerson }));\r\n            }else{\r\n              // alert('User or Email incorrect');\r\n            }\r\n          } catch (error) {\r\n            console.error('error person');\r\n          }\r\n\r\n          this.store.dispatch(LoginSuccess({ any: response }));\r\n          this.router.navigateByUrl('/dashboard');\r\n        } else {\r\n          this.store.dispatch(LoginFail({ any: response }));\r\n          Swal.fire('User or Email incorrect', '', 'error');\r\n        }\r\n      } catch (error) {\r\n        console.error('error => ', error);\r\n        this.store.dispatch(LoginFail({ any: error }));\r\n      }\r\n    }\r\n  }\r\n}\r\n","<div class=\"flex items-center justify-center min-h-screen\">\r\n  <form class=\"p-8 text-xl w-1/2\" [formGroup]=\"form\" (ngSubmit)=\"login()\">\r\n    <div class=\"text-center mb-4\">\r\n      <span class=\"icon-banknote text-10xl\"></span>\r\n    </div>\r\n    <div class=\"grid gap-4 grid-cols-2 mb-4\">\r\n      <div>\r\n        <input class=\"w-full p-2 rounded-sm bg-gray-400\" type=\"text\" placeholder=\"User\" formControlName=\"user\">\r\n      </div>\r\n      <div>\r\n        <input class=\"w-full p-2 rounded-sm bg-gray-400\" type=\"password\" placeholder=\"Password\" formControlName=\"password\">\r\n      </div>\r\n    </div>\r\n    <button type=\"submit\" class=\"block w-full uppercase p-2 rounded-sm bg-top text-white\">Log In</button>\r\n\r\n    <div class=\"text-center mt-4\">\r\n      <a class=\"text-blue-500\" [routerLink]=\"['/register']\">Register</a>\r\n    </div>\r\n  </form>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { LoginRoutingModule } from './login-routing.module';\r\nimport { LoginComponent } from './login.component';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LoginComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    LoginRoutingModule,\r\n    ReactiveFormsModule\r\n  ]\r\n})\r\nexport class LoginModule { }\r\n"],"sourceRoot":"webpack:///","file":"545.faaf7a2a6b888ef200b2.js"}