"use strict";(self.webpackChunkappgastos_frontend=self.webpackChunkappgastos_frontend||[]).push([[545],{7545:(A,p,o)=>{o.r(p),o.d(p,{LoginModule:()=>x});var m=o(4364),l=o(5709),f=o(9369),n=o(335),u=o(4693),h=o(8190),v=o.n(h),e=o(2316),y=o(7556),Z=o(3071),L=o(5540);const C=function(){return["/register"]},S=[{path:"",component:(()=>{class r{constructor(t,a,c,d){this.authService=t,this.userService=a,this.store=c,this.router=d,this.user={},localStorage.login&&this.router.navigateByUrl("/dashboard"),this.router.routerState.root.queryParams.subscribe(s=>{s.user&&(this.user=s.user)})}ngOnInit(){this.form=new n.cw({user:new n.NI(("string"==typeof this.user?this.user:"")||"",n.kI.required),password:new n.NI("",n.kI.required)})}login(){var t=this;return(0,f.Z)(function*(){if(t.store.dispatch((0,u.m3)()),t.form.valid){let{user:a,password:c}=t.form.controls,d={user:a.value,password:c.value};try{let s=yield t.authService.login(d);if(Object.keys(s).length){try{let g=yield t.userService.person(s.id);Object.keys(g).length&&t.store.dispatch((0,u.gE)({any:g}))}catch(g){console.error("error person")}t.store.dispatch((0,u.yp)({any:s})),t.router.navigateByUrl("/dashboard")}else t.store.dispatch((0,u.Cp)({any:s})),v().fire("User or Email incorrect","","error")}catch(s){console.error("error => ",s),t.store.dispatch((0,u.Cp)({any:s}))}}})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(y.e),e.Y36(Z.K),e.Y36(L.yh),e.Y36(l.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login"]],decls:14,vars:3,consts:[[1,"flex","items-center","justify-center","min-h-screen"],[1,"p-8","text-xl","w-1/2",3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"icon-banknote","text-10xl"],[1,"grid","gap-4","grid-cols-2","mb-4"],["type","text","placeholder","User","formControlName","user",1,"w-full","p-2","rounded-sm","bg-gray-400"],["type","password","placeholder","Password","formControlName","password",1,"w-full","p-2","rounded-sm","bg-gray-400"],["type","submit",1,"block","w-full","uppercase","p-2","rounded-sm","bg-top","text-white"],[1,"text-center","mt-4"],[1,"text-blue-500",3,"routerLink"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return a.login()}),e.TgZ(2,"div",2),e._UZ(3,"span",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div"),e._UZ(6,"input",5),e.qZA(),e.TgZ(7,"div"),e._UZ(8,"input",6),e.qZA(),e.qZA(),e.TgZ(9,"button",7),e._uU(10,"Log In"),e.qZA(),e.TgZ(11,"div",8),e.TgZ(12,"a",9),e._uU(13,"Register"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(11),e.Q6J("routerLink",e.DdM(2,C)))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,l.yS],encapsulation:2}),r})()}];let T=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[l.Bz.forChild(S)],l.Bz]}),r})(),x=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[m.ez,T,n.UX]]}),r})()}}]);
//# sourceMappingURL=545.faaf7a2a6b888ef200b2.js.map