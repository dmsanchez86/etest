"use strict";(self.webpackChunkappgastos_frontend=self.webpackChunkappgastos_frontend||[]).push([[719],{7719:(Ye,P,p)=>{p.r(P),p.d(P,{InvestmentsModule:()=>De});var d=p(4364),u=p(5709),f=p(9369),x=p(1318),y=p(239),t=p(2316),I=p(5540),nt=p(2e3),it=p(5409);let ot=(()=>{class n{constructor(e,i,a,s){this.activatedRoute=e,this.store=i,this.storeSrv=a,this.actions=s,this.params={},this.validationInitial=!1,this.subP=new x.w,this.susA=new x.w,this.subP=this.activatedRoute.queryParams.subscribe(r=>{console.log("qa suscription (router) params start-investments.component",r),Object.keys(this.params).length&&!Object.keys(r).length&&this.store.dispatch((0,y.U7)()),this.params=r}),this.susA=this.actions.subscribe(r=>{("[Investment User] Create Success"===r.type||"[Investment User] Delete Success"===r.type)&&this.getAllData(!0),"[Investment User] Reset Filters Investments"===r.type&&(this.params={},this.getAllData(!0))})}ngOnInit(){var e=this;return(0,f.Z)(function*(){Object.keys(e.params).length&&(e.store.dispatch((0,y.BR)({filters:e.params,ref:"initial start 999999999999"})),e.validationInitial=!0,yield e.storeSrv.investmentsByDate(e.params,"onInitSTART INVESTMENTS1")),e.getAllData(),yield e.storeSrv.getCategoriesInvestments()})()}getAllData(e=!1){var i=this;return(0,f.Z)(function*(){Object.keys(i.params).length>1&&!e||(yield i.storeSrv.investmentsByDate(i.params,"onInitSTART INVESTMENTS"),yield i.storeSrv.getAllDataInvestments())})()}ngOnDestroy(){this.subP.unsubscribe(),this.susA.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.gz),t.Y36(I.yh),t.Y36(nt.d),t.Y36(it.eX))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-start-investments"]],decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"router-outlet")},directives:[u.lC],encapsulation:2}),n})();var at=p(7787),c=p(335),C=(p(3802),p(686)),rt=p(7028);let lt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-investment"]],decls:4,vars:0,consts:[[1,"container","pt-5","mx-auto"],[1,"grid","gap-4"],[1,"form-general"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div"),t._UZ(3,"app-form-investments",2),t.qZA(),t.qZA(),t.qZA())},directives:[rt.d],encapsulation:2}),n})();var Z=p(5859),R=p(2335),k=p(7919),z=p(4664),X=p(163);function ct(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"- Hide"),t.qZA())}function pt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"+ Show"),t.qZA())}function mt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"span",10),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).toggleChart()}),t.YNc(2,ct,2,0,"span",0),t.ALo(3,"async"),t.YNc(4,pt,2,0,"span",0),t.ALo(5,"async"),t._uU(6," Chart "),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("ngIf",t.lcZ(3,2,e.showChart$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(5,4,e.showChart$))}}const ht=function(){return{text:"All Investments",align:"center"}};function gt(n,o){if(1&n&&t._UZ(0,"app-line",14),2&n){const e=t.oxw(5);t.Q6J("dataGraphics",e.dataGraphics)("nameLegend","All Time Investments")("nameAvg","Average All")("title",t.DdM(4,ht))}}function _t(n,o){}function dt(n,o){}function vt(n,o){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,gt,1,5,"app-line",12),t.YNc(2,_t,0,0,"ng-template",13),t.YNc(3,dt,0,0,"ng-template",13),t.qZA()),2&n){const e=t.oxw(4),i=t.MAs(6),a=t.MAs(4);t.xp6(1),t.Q6J("ngIf",null==e.dataGraphics?null:e.dataGraphics.length),t.xp6(1),t.Q6J("ngTemplateOutlet",i),t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}const ut=function(){return{text:"Month Investments",align:"center"}};function ft(n,o){if(1&n&&t._UZ(0,"app-line",16),2&n){const e=t.oxw(5);t.Q6J("dataGraphics",e.dataGraphics)("type","month")("nameLegend","Month Investments")("nameAvg","Average Month")("title",t.DdM(5,ut))}}function xt(n,o){}function It(n,o){}function yt(n,o){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,ft,1,6,"app-line",15),t.YNc(2,xt,0,0,"ng-template",13),t.YNc(3,It,0,0,"ng-template",13),t.qZA()),2&n){const e=t.oxw(4),i=t.MAs(6),a=t.MAs(4);t.xp6(1),t.Q6J("ngIf",null==e.dataGraphics?null:e.dataGraphics.length),t.xp6(1),t.Q6J("ngTemplateOutlet",i),t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}const Ct=function(){return{}},Zt=function(){return{text:"Year Investments",align:"center"}};function Tt(n,o){if(1&n&&t._UZ(0,"app-line",18),2&n){const e=t.oxw(5);t.Q6J("dataGraphics",e.dataGraphics)("type","year")("nameLegend","Year Investments")("nameAvg","Average Year")("xAxis",t.DdM(6,Ct))("title",t.DdM(7,Zt))}}function At(n,o){}function Mt(n,o){}function Gt(n,o){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,Tt,1,8,"app-line",17),t.YNc(2,At,0,0,"ng-template",13),t.YNc(3,Mt,0,0,"ng-template",13),t.qZA()),2&n){const e=t.oxw(4),i=t.MAs(6),a=t.MAs(4);t.xp6(1),t.Q6J("ngIf",null==e.dataGraphics?null:e.dataGraphics.length),t.xp6(1),t.Q6J("ngTemplateOutlet",i),t.xp6(1),t.Q6J("ngTemplateOutlet",a)}}function bt(n,o){}function wt(n,o){}function Jt(n,o){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,bt,0,0,"ng-template",13),t.YNc(2,wt,0,0,"ng-template",13),t.qZA()),2&n){t.oxw(4);const e=t.MAs(6),i=t.MAs(4);t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}function Ot(n,o){}function Dt(n,o){}function Yt(n,o){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,Ot,0,0,"ng-template",13),t.YNc(2,Dt,0,0,"ng-template",13),t.qZA()),2&n){t.oxw(4);const e=t.MAs(6),i=t.MAs(4);t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}function Qt(n,o){if(1&n&&(t.ynx(0),t.YNc(1,vt,4,3,"div",11),t.ALo(2,"async"),t.YNc(3,yt,4,3,"div",11),t.ALo(4,"async"),t.YNc(5,Gt,4,3,"div",11),t.ALo(6,"async"),t.YNc(7,Jt,3,2,"div",11),t.ALo(8,"async"),t.YNc(9,Yt,3,2,"div",11),t.ALo(10,"async"),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!e.form.controls.filter.value&&t.lcZ(2,5,e.showChart$)),t.xp6(2),t.Q6J("ngIf","month"===e.form.controls.filter.value&&e.form.controls.month.value&&t.lcZ(4,7,e.showChart$)),t.xp6(2),t.Q6J("ngIf","year"===e.form.controls.filter.value&&e.form.controls.year.value&&t.lcZ(6,9,e.showChart$)),t.xp6(2),t.Q6J("ngIf","date"===e.form.controls.filter.value&&e.form.controls.date.value&&t.lcZ(8,11,e.showChart$)),t.xp6(2),t.Q6J("ngIf","dates"===e.form.controls.filter.value&&e.form.controls.date1.value&&e.form.controls.date2.value&&t.lcZ(10,13,e.showChart$))}}function Nt(n,o){if(1&n&&(t.TgZ(0,"div",4),t.TgZ(1,"div",5),t.TgZ(2,"form",6),t._UZ(3,"app-investments-filters",7),t.qZA(),t.YNc(4,mt,7,6,"div",0),t.YNc(5,Qt,11,15,"ng-container",0),t.TgZ(6,"div",8),t._UZ(7,"app-investments-person",9),t.qZA(),t.qZA(),t.qZA()),2&n){const e=o.ngIf,i=t.oxw(2);t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("form",i.form)("isFromCreate",!0),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.length)&&i.loaded),t.xp6(1),t.Q6J("ngIf",i.loaded),t.xp6(2),t.Q6J("showHeader",!1)("showLink",!1)("padding",!1)("showDelete",!0)}}function qt(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Nt,8,9,"div",3),t.BQk()),2&n){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",null==e?null:e.data)}}function Ut(n,o){if(1&n&&(t.TgZ(0,"div",20),t._UZ(1,"apx-chart",21),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("series",null==e.chartOptionsMonth4?null:e.chartOptionsMonth4.series)("chart",null==e.chartOptionsMonth4?null:e.chartOptionsMonth4.chart)("dataLabels",null==e.chartOptionsMonth4?null:e.chartOptionsMonth4.dataLabels)("grid",null==e.chartOptionsMonth4?null:e.chartOptionsMonth4.grid)("stroke",null==e.chartOptionsMonth4?null:e.chartOptionsMonth4.stroke)("title",null==e.chartOptionsMonth4?null:e.chartOptionsMonth4.title)("plotOptions",null==e.chartOptionsMonth4?null:e.chartOptionsMonth4.plotOptions)("colors",null==e.chartOptionsMonth4?null:e.chartOptionsMonth4.colors)}}function Lt(n,o){if(1&n&&t.YNc(0,Ut,2,8,"div",19),2&n){const e=t.oxw();t.Q6J("ngIf",null==e.chartOptionsMonth4?null:e.chartOptionsMonth4.series)}}const W=function(){return{text:"Year Category",align:"center"}};function Ft(n,o){if(1&n&&t._UZ(0,"app-donut",25),2&n){const e=t.oxw(2);t.Q6J("dataGraphics",e.dataGraphics)("nameLegend","investment")("type","categoryinvestments")("title",t.DdM(4,W))}}function St(n,o){if(1&n&&t._UZ(0,"app-donut",26),2&n){const e=t.oxw(2);t.Q6J("dataGraphics",e.dataGraphics)("type","account")("title",t.DdM(3,W))}}function jt(n,o){if(1&n&&(t.TgZ(0,"div",22),t.YNc(1,Ft,1,5,"app-donut",23),t.YNc(2,St,1,4,"app-donut",24),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.dataGraphics?null:e.dataGraphics.length),t.xp6(1),t.Q6J("ngIf",null==e.dataGraphics?null:e.dataGraphics.length)}}let $t=(()=>{class n{constructor(e,i,a){this.store=e,this.activatedRoute=i,this.utils=a,this.showChart$=this.store.select(s=>{var r,l;return null===(l=null===(r=null==s?void 0:s.investments)||void 0===r?void 0:r.filters)||void 0===l?void 0:l.showChart}),this.investments$=this.store.select(s=>s.investments),this.user={},this.form=new c.cw({}),this.categories=this.store.select(s=>s.categories_investments.data),this.methods=this.store.select(s=>s.user.data.accounts),this.loading=!1,this.loaded=!1,this.dataGraphicMonth2=[],this.dataGraphicMonth3=[],this.dataGraphicMonth4=[],this.dataGraphicYear2=[],this.dataGraphics=[],this.sub=new x.w,this.buildForm(),this.sub=this.store.select(s=>s).subscribe(s=>{var r,l,m,h,_,v,A,M,G,b,w,J,O,D,Y,Q,N,q,U,L,F,S,j,$,B,H,E;try{if(this.loading=null===(r=null==s?void 0:s.investments)||void 0===r?void 0:r.loading,this.loaded=null===(l=null==s?void 0:s.investments)||void 0===l?void 0:l.loaded,this.user=null===(m=null==s?void 0:s.user)||void 0===m?void 0:m.data,this.queryParams=null===(h=null==s?void 0:s.investments)||void 0===h?void 0:h.filters,!(null===(_=null==s?void 0:s.investments)||void 0===_?void 0:_.data))return;const g=[{},...null===(v=null==s?void 0:s.investments)||void 0===v?void 0:v.complete];this.dataGraphics=[{},...null===(A=null==s?void 0:s.investments)||void 0===A?void 0:A.complete],(null===(G=null===(M=this.form)||void 0===M?void 0:M.value)||void 0===G?void 0:G.filter)||(this.dataGraphicMonth2=this.generateDataGraphicMonth2(g),this.dataGraphicMonth3=this.generateDataGraphicMonth3(g),this.dataGraphicMonth4=this.generateDataGraphicMonth2(g),this.chartOptionsMonth2=this.dataChartMonth2(),this.chartOptionsMonth3=this.dataChartMonth2(!0),this.chartOptionsMonth4=this.dataChartMonth4()),"month"===(null===(w=null===(b=this.form)||void 0===b?void 0:b.value)||void 0===w?void 0:w.filter)&&(null===(O=null===(J=this.form)||void 0===J?void 0:J.value)||void 0===O?void 0:O.month)&&(this.dataGraphicMonth2=this.generateDataGraphicMonth2(g),this.dataGraphicMonth3=this.generateDataGraphicMonth3(g),this.dataGraphicMonth4=this.generateDataGraphicMonth2(g),this.chartOptionsMonth2=this.dataChartMonth2(),this.chartOptionsMonth3=this.dataChartMonth2(!0),this.chartOptionsMonth4=this.dataChartMonth4()),"year"===(null===(Y=null===(D=this.form)||void 0===D?void 0:D.value)||void 0===Y?void 0:Y.filter)&&(null===(N=null===(Q=this.form)||void 0===Q?void 0:Q.value)||void 0===N?void 0:N.year)&&(this.dataGraphicYear2=this.generateDataGraphicYear2(g),this.chartOptionsYear2=this.dataChartYear2(),this.dataGraphicMonth2=this.generateDataGraphicMonth2(g),this.dataGraphicMonth3=this.generateDataGraphicMonth3(g),this.chartOptionsMonth2=this.dataChartMonth2(),this.chartOptionsMonth3=this.dataChartMonth2(!0),this.dataGraphicMonth4=this.generateDataGraphicMonth2(g),this.chartOptionsMonth4=this.dataChartMonth4()),"date"===(null===(U=null===(q=this.form)||void 0===q?void 0:q.value)||void 0===U?void 0:U.filter)&&(null===(F=null===(L=this.form)||void 0===L?void 0:L.value)||void 0===F?void 0:F.date)&&(this.dataGraphicMonth2=this.generateDataGraphicMonth2(g),this.dataGraphicMonth3=this.generateDataGraphicMonth3(g),this.chartOptionsMonth2=this.dataChartMonth2(),this.chartOptionsMonth3=this.dataChartMonth2(!0),this.dataGraphicMonth4=this.generateDataGraphicMonth2(g),this.chartOptionsMonth4=this.dataChartMonth4()),"dates"===(null===(j=null===(S=this.form)||void 0===S?void 0:S.value)||void 0===j?void 0:j.filter)&&(null===(B=null===($=this.form)||void 0===$?void 0:$.value)||void 0===B?void 0:B.date1)&&(null===(E=null===(H=this.form)||void 0===H?void 0:H.value)||void 0===E?void 0:E.date2)&&(this.dataGraphicMonth2=this.generateDataGraphicMonth2(g),this.dataGraphicMonth3=this.generateDataGraphicMonth3(g),this.chartOptionsMonth2=this.dataChartMonth2(),this.chartOptionsMonth3=this.dataChartMonth2(!0),this.dataGraphicMonth4=this.generateDataGraphicMonth2(g),this.chartOptionsMonth4=this.dataChartMonth4())}catch(g){console.log(g)}})}ngOnDestroy(){this.sub.unsubscribe()}ngOnInit(){}buildForm(){this.form=this.utils.form()}dataChartYear2(){return{series:[{name:"Investments",data:this.dataGraphicYear2}],chart:{height:400,type:"line",zoom:{enabled:!0}},dataLabels:{enabled:!0,formatter:e=>""+(new Intl.NumberFormat).format(e)},stroke:{curve:"straight",width:2},title:{text:"Investments by Year",align:"center"},grid:{show:!0,borderColor:"#ddd",yaxis:{lines:{show:!0}},xaxis:{lines:{show:!0}}}}}dataChartMonth2(e){const i=e?this.dataGraphicMonth3:this.dataGraphicMonth2;return{series:i.map(a=>a.y),chart:{height:400,type:"pie",zoom:{enabled:!0},toolbar:{show:!0}},labels:i.map(a=>a.x+" - $"+(new Intl.NumberFormat).format(a.y)),plotOptions:{pie:{donut:{labels:{show:!0,total:{showAlways:!0,show:!0}}}}},title:{show:!0,text:"Investments by Month"},tooltip:{theme:"dark",x:{},y:{title:{formatter:a=>(console.log(a),"")}}}}}dataChartMonth4(){return{series:[{data:this.dataGraphicMonth2}],chart:{height:500,type:"treemap"},colors:["#3B93A5","#F7B844","#ADD8C7","#EC3C65","#CDD7B6","#C1F666","#D43F97","#1E5D8C","#421243","#7F94B0","#EF6537","#C0ADDB"],plotOptions:{treemap:{distributed:!0,enableShades:!1}},title:{text:"Investments by Month",align:"center"}}}generateDataGraphicYear2(e){if(!e.length)return[];e=[...e.sort((l,m)=>Number(new Date(l.date))-Number(new Date(m.date)))];let i=[...e];var a=[];return i.reduce((l,m)=>{let h=m.date.split("-"),_=new Date(`${h[1]}-${h[2]}-${h[0]}`).toLocaleDateString();return l[_]||(l[_]={month:_},Object.keys(m).forEach(function(v){"date"!=v&&(l[_][v]=0)}),a.push(l[_])),Object.keys(m).forEach(function(v){"date"!=v&&(l[_][v]+=m[v])}),l}),a.map(l=>({x:l.month,y:l.value}))}generateDataGraphicMonth2(e){if(!e.length)return[];e=[...e.sort((r,l)=>Number(new Date(r.date))-Number(new Date(l.date)))];let i=[...e];var a=[];return i.reduce((r,l)=>{let m=l.category_investment.name;return r[m]||(r[m]={dia:m},Object.keys(l).forEach(function(h){"date"!=h&&(r[m][h]=0)}),a.push(r[m])),Object.keys(l).forEach(function(h){"date"!=h&&(r[m][h]+=l[h])}),r}),a.map(r=>({x:r.dia,y:r.value}))}generateDataGraphicMonth3(e){if(!e.length)return[];e=[...e.sort((r,l)=>Number(new Date(r.date))-Number(new Date(l.date)))];let i=[...e];var a=[];return i.reduce((r,l)=>{var m;let h=null===(m=l.account)||void 0===m?void 0:m.name;return r[h]||(r[h]={dia:h},Object.keys(l).forEach(function(_){"date"!=_&&(r[h][_]=0)}),a.push(r[h])),Object.keys(l).forEach(function(_){"date"!=_&&(r[h][_]+=l[_])}),r}),a.map(r=>({x:r.dia,y:r.value}))}toggleChart(){this.store.dispatch((0,y.zr)()),this.utils.createUrl(Object.assign({},this.queryParams),this.activatedRoute,"toggleChart()")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(I.yh),t.Y36(u.gz),t.Y36(C.w))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-investments"]],decls:7,vars:3,consts:[[4,"ngIf"],["tree",""],["donuts",""],["class","container pt-5 mx-auto",4,"ngIf"],[1,"container","pt-5","mx-auto"],[1,"grid","gap-4"],[3,"formGroup"],[3,"form","isFromCreate"],[1,""],[3,"showHeader","showLink","padding","showDelete"],[1,"cursor-pointer","font-semibold","hover:font-bold",3,"click"],["class","",4,"ngIf"],[3,"dataGraphics","nameLegend","nameAvg","title",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"dataGraphics","nameLegend","nameAvg","title"],[3,"dataGraphics","type","nameLegend","nameAvg","title",4,"ngIf"],[3,"dataGraphics","type","nameLegend","nameAvg","title"],[3,"dataGraphics","type","nameLegend","nameAvg","xAxis","title",4,"ngIf"],[3,"dataGraphics","type","nameLegend","nameAvg","xAxis","title"],["id","chart",4,"ngIf"],["id","chart"],[3,"series","chart","dataLabels","grid","stroke","title","plotOptions","colors"],[1,"grid","grid-cols-2"],[3,"dataGraphics","nameLegend","type","title",4,"ngIf"],[3,"dataGraphics","type","title",4,"ngIf"],[3,"dataGraphics","nameLegend","type","title"],[3,"dataGraphics","type","title"]],template:function(e,i){1&e&&(t._UZ(0,"app-create-investment"),t.YNc(1,qt,2,1,"ng-container",0),t.ALo(2,"async"),t.YNc(3,Lt,1,1,"ng-template",null,1,t.W1O),t.YNc(5,jt,3,2,"ng-template",null,2,t.W1O)),2&e&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,i.investments$)))},directives:[lt,d.O5,c._Y,c.JL,c.sg,Z.I,R.Z,d.tP,k.y,z.x,X.L],pipes:[d.Ov],encapsulation:2}),n})();var T=p(3218),V=p(1238);function Bt(n,o){if(1&n&&(t.TgZ(0,"div",3),t._UZ(1,"app-item-investment",4),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("showDelete",!0)("item",e.inversion)("link",!1)("complete",!0)}}function Ht(n,o){if(1&n&&(t.TgZ(0,"div",1),t.YNc(1,Bt,2,4,"div",2),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.inversion?null:e.inversion.id)}}let Et=(()=>{class n{constructor(e,i){this.investmentService=e,this.route=i,this.id=0,this.susP=new x.w,this.inversion=[],this.inversionHistory=[],this.total=0,this.susP=this.route.params.subscribe(a=>{this.id=a.id})}ngOnDestroy(){this.susP.unsubscribe()}ngOnInit(){var e=this;return(0,f.Z)(function*(){yield e.getDataInvestment(),yield e.getDataInvestmentHistory()})()}getDataInvestment(){var e=this;return(0,f.Z)(function*(){try{let i=yield e.investmentService.getDataInvestment(e.id);console.log(i),Object.keys(i).length&&(e.inversion=i)}catch(i){console.log(i)}})()}getDataInvestmentHistory(){var e=this;return(0,f.Z)(function*(){try{let i=yield e.investmentService.getDataInvestmentHistory(e.inversion.id);console.log(i),Object.keys(i).length&&(e.inversionHistory=i)}catch(i){console.log(i)}})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.J),t.Y36(u.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-detail-investment"]],decls:1,vars:1,consts:[["class","container mt-8 mx-auto",4,"ngIf"],[1,"container","mt-8","mx-auto"],["class","grid gap-4",4,"ngIf"],[1,"grid","gap-4"],[3,"showDelete","item","link","complete"]],template:function(e,i){1&e&&t.YNc(0,Ht,2,1,"div",0),2&e&&t.Q6J("ngIf",null==i.inversion?null:i.inversion.id)},directives:[d.O5,V.v],encapsulation:2}),n})();var K=p(6252),tt=p(6729);let Pt=(()=>{class n{constructor(e,i){this.investmentService=e,this.store=i,this.form=new c.cw({}),this.sus=new x.w,this.user={},this.categories=this.store.select(a=>a.categories_investments.data),this.sus=this.store.subscribe(a=>{this.user=a.user.data})}ngOnInit(){this.form=new c.cw({category:new c.NI("",c.kI.required)})}ngOnDestroy(){this.sus.unsubscribe()}createInvestmentCategory(){var e=this;return(0,f.Z)(function*(){var i,a;if(e.form.valid){let{category:s}=e.form.controls;try{let r={category:s.value,person:null===(a=null===(i=e.user)||void 0===i?void 0:i.person)||void 0===a?void 0:a.id},l=yield e.investmentService.createCategoryInvestment(r);l.category?(console.log("registro exitoso",l),e.form.reset(),e.store.dispatch((0,K.n)({any:l.categories}))):console.log("registro fallido")}catch(r){console.log("error => ",r)}}})()}deleteCategory(e){var i=this;return(0,f.Z)(function*(){if(e.id)try{let a={category:e.id,person:e.id_person},s=yield i.investmentService.deleteCategorieInvestment(a);s.category?(console.log("category eliminada exitosamente"),i.form.reset(),i.store.dispatch((0,K.n)({any:s.categories}))):console.log("category eliminada fallida")}catch(a){console.log("error => ",a)}})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.J),t.Y36(I.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-investment-category"]],decls:15,vars:2,consts:[[1,"container","pt-5","mx-auto"],[1,"grid","grid-cols-2","gap-4"],[1,"text-center","font-bold","text-2xl","mt-7","mb-5"],[1,"icon-handshake-o","mr-1"],[3,"formGroup","ngSubmit"],[1,"w-full"],["type","text","placeholder","Investment Category Name","formControlName","category",1,"w-full","p-2","mb-2"],["type","submit",1,"btn-form"],[3,"padding"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div"),t.TgZ(3,"div",0),t.TgZ(4,"h1",2),t._UZ(5,"span",3),t._uU(6," Create Investment Category"),t.qZA(),t.TgZ(7,"form",4),t.NdJ("ngSubmit",function(){return i.createInvestmentCategory()}),t.TgZ(8,"div",5),t._UZ(9,"input",6),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"button",7),t._uU(12,"Create"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div"),t._UZ(14,"app-list-categories-investments",8),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.Q6J("formGroup",i.form),t.xp6(7),t.Q6J("padding",!1))},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,tt.Z],encapsulation:2}),n})();function Rt(n,o){1&n&&(t.TgZ(0,"option",26),t._uU(1,"Create one"),t.qZA()),2&n&&t.Q6J("value","create")}function kt(n,o){if(1&n&&(t.TgZ(0,"option",27),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function zt(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"app-item-investment",30),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("showDelete",!1)("item",e)}}function Xt(n,o){if(1&n&&(t.TgZ(0,"div",28),t.YNc(1,zt,2,2,"ng-container",29),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.investments)}}function Wt(n,o){if(1&n&&(t.TgZ(0,"div",31),t._uU(1),t.TgZ(2,"a",32),t._uU(3,"here"),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" There're not investments for this category ",null==e.category?null:e.category.name,", create one "),t.xp6(1),t.Q6J("routerLink","/dashboard/investments")}}function Vt(n,o){1&n&&(t.TgZ(0,"div",33),t.TgZ(1,"a",34),t._UZ(2,"span",35),t._uU(3," Create investment"),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("routerLink","/dashboard/investments/create"))}function Kt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){return t.CHM(e),t.oxw().prev()}),t._uU(1,"<"),t.qZA()}}function te(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.limit*(e.page+1))}}function ee(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.quantity)}}function ne(n,o){if(1&n&&(t.TgZ(0,"option",27),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e+1)}}function ie(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){return t.CHM(e),t.oxw().next()}),t._uU(1,">"),t.qZA()}}let oe=(()=>{class n{constructor(e,i,a,s){this.store=e,this.investmentService=i,this.route=a,this.router=s,this.id=0,this.user={},this.susP=new x.w,this.sus=new x.w,this.investments=[],this.category=[],this.total=0,this.quantity=0,this.page=0,this.pageA=0,this.pages=0,this.pagesArray=[],this.limit=24,this.categories$=this.store.select(r=>r.categories_investments.data),this.susP=this.route.params.subscribe(r=>{this.id=r.id}),this.sus=this.store.select(r=>r.user).subscribe(r=>{this.user=r.data})}ngOnDestroy(){this.susP.unsubscribe(),this.sus.unsubscribe()}ngOnInit(e){var i=this;return(0,f.Z)(function*(){try{e&&(i.pageA=0,i.page=0,i.pages=0,i.quantity=0,i.total=0,i.investments=[]);const a={category:i.id,person:i.user.id,page:i.page,limit:i.limit};let s=yield i.investmentService.getInvestmentsByCategory(a);if(console.log(s),s.category&&(i.category=s.category),s.investments&&(i.investments=s.investments.rows),s.total&&(i.total=s.total),s.quantity&&(i.quantity=s.quantity),s.pages){i.pages=s.pages,i.pagesArray=[];for(let r=0;r<i.pages;r++)i.pagesArray.push(r)}}catch(a){console.log(a)}})()}setPage(){this.page=parseInt(this.pageA),this.ngOnInit()}next(){this.page++,this.pageA=this.page,this.ngOnInit()}prev(){this.page--,this.pageA=this.page,this.ngOnInit()}seeByCategory(){this.router.navigateByUrl(`/dashboard/investments/by-category/${this.id}`),this.ngOnInit(!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(I.yh),t.Y36(T.J),t.Y36(u.gz),t.Y36(u.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-detail-investment-category"]],decls:51,vars:27,consts:[[1,"search-wrap","pt-8","px-6","h-full"],[1,"search-header"],[1,"main-text","flex","justify-between"],[1,"main-label"],[1,"flex","gap-2"],[1,"pb-1",3,"ngModel","ngModelChange","change"],["class","text-blue-400",3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange","change"],["value","12"],["value","20"],["value","24"],["value","36"],["value","48"],["value","60"],["value","100"],[1,"search-content","overflow-auto"],["class","grid xl:grid-cols-4 md:grid-cols-3 grid-cols-2 gap-4",4,"ngIf"],["class","alert p-2",4,"ngIf"],[1,"search-footer"],["class","alert pt-3",4,"ngIf"],[1,"pagetor","inline-flex","justify-end","items-end","relative","-top-4","text-sm","fr"],["class","btn py-1 px-4 hover:bg-gray-800 transition-all text-white bg-gray-600 text-sm font-bold",3,"click",4,"ngIf"],[1,"p-1","bg-gray-900","text-white"],[4,"ngIf"],[1,"text-black",3,"ngModel","ngModelChange","change"],[1,"text-blue-400",3,"value"],[3,"value"],[1,"grid","xl:grid-cols-4","md:grid-cols-3","grid-cols-2","gap-4"],[4,"ngFor","ngForOf"],[3,"showDelete","item"],[1,"alert","p-2"],[3,"routerLink"],[1,"alert","pt-3"],[1,"main-btn",3,"routerLink"],[1,"icon-coin-dollar","mr-1"],[1,"btn","py-1","px-4","hover:bg-gray-800","transition-all","text-white","bg-gray-600","text-sm","font-bold",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h4",2),t.TgZ(3,"span"),t._uU(4," Have "),t.TgZ(5,"b",3),t._uU(6),t.qZA(),t._uU(7," investments with this category "),t.TgZ(8,"b",3),t._uU(9),t.qZA(),t._uU(10,", by total of "),t.TgZ(11,"b",3),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.qZA(),t.TgZ(14,"div",4),t.TgZ(15,"select",5),t.NdJ("ngModelChange",function(s){return i.id=s})("change",function(){return i.seeByCategory()}),t.YNc(16,Rt,2,1,"option",6),t.ALo(17,"async"),t.YNc(18,kt,2,2,"option",7),t.ALo(19,"async"),t.qZA(),t.TgZ(20,"select",8),t.NdJ("ngModelChange",function(s){return i.limit=s})("change",function(){return i.ngOnInit(!0)}),t.TgZ(21,"option",9),t._uU(22,"12"),t.qZA(),t.TgZ(23,"option",10),t._uU(24,"20"),t.qZA(),t.TgZ(25,"option",11),t._uU(26,"24"),t.qZA(),t.TgZ(27,"option",12),t._uU(28,"36"),t.qZA(),t.TgZ(29,"option",13),t._uU(30,"48"),t.qZA(),t.TgZ(31,"option",14),t._uU(32,"60"),t.qZA(),t.TgZ(33,"option",15),t._uU(34,"100"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",16),t.YNc(36,Xt,2,1,"div",17),t.YNc(37,Wt,4,2,"div",18),t.qZA(),t.TgZ(38,"div",19),t.YNc(39,Vt,4,1,"div",20),t.TgZ(40,"div",21),t.YNc(41,Kt,2,0,"button",22),t.TgZ(42,"span",23),t._uU(43," Showing "),t.YNc(44,te,2,1,"span",24),t.YNc(45,ee,2,1,"span",24),t._uU(46),t.TgZ(47,"select",25),t.NdJ("ngModelChange",function(s){return i.pageA=s})("change",function(){return i.setPage()}),t.YNc(48,ne,2,2,"option",7),t.qZA(),t._uU(49),t.qZA(),t.YNc(50,ie,2,0,"button",22),t.qZA(),t.qZA(),t.qZA()),2&e){let a;t.xp6(6),t.Oqu(i.quantity),t.xp6(3),t.Oqu(null==i.category?null:i.category.name),t.xp6(3),t.Oqu(t.gM2(13,18,i.total,"$","symbol","4.0")),t.xp6(3),t.Q6J("ngModel",i.id),t.xp6(1),t.Q6J("ngIf",!(null!=(a=t.lcZ(17,23,i.categories$))&&a.length)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(19,25,i.categories$)),t.xp6(2),t.Q6J("ngModel",i.limit),t.xp6(16),t.Q6J("ngIf",i.investments&&i.investments.length),t.xp6(1),t.Q6J("ngIf",i.investments&&!i.investments.length),t.xp6(2),t.Q6J("ngIf",i.investments&&i.investments.length),t.xp6(2),t.Q6J("ngIf",i.page+1>1),t.xp6(3),t.Q6J("ngIf",i.limit*(i.page+1)<i.quantity),t.xp6(1),t.Q6J("ngIf",i.limit*(i.page+1)>i.quantity),t.xp6(1),t.hij(" of ",i.quantity," Registers | Page: "),t.xp6(1),t.Q6J("ngModel",i.pageA),t.xp6(1),t.Q6J("ngForOf",i.pagesArray),t.xp6(1),t.hij("/",i.pages," "),t.xp6(1),t.Q6J("ngIf",i.page+1<i.pages)}},directives:[c.EJ,c.JJ,c.On,d.O5,d.sg,c.YN,c.Kr,V.v,u.yS],pipes:[d.H9,d.Ov],encapsulation:2}),n})();const se=function(){return{text:"All Investments",align:"center"}};function re(n,o){if(1&n&&t._UZ(0,"app-line",7),2&n){const e=t.oxw(3);t.Q6J("dataGraphics",e.dataGraphics)("nameLegend","All Time Investments")("nameAvg","Average All")("title",t.DdM(4,se))}}function le(n,o){}function ce(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,re,1,5,"app-line",5),t.YNc(2,le,0,0,"ng-template",6),t.qZA()),2&n){const e=t.oxw(2),i=t.MAs(5);t.xp6(1),t.Q6J("ngIf",null==e.dataGraphics?null:e.dataGraphics.length),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}const pe=function(){return{text:"Month Investments",align:"center"}};function me(n,o){if(1&n&&t._UZ(0,"app-line",9),2&n){const e=t.oxw(3);t.Q6J("dataGraphics",e.dataGraphics)("type","month")("nameLegend","Month Investments")("nameAvg","Average Month")("title",t.DdM(5,pe))}}function he(n,o){}function ge(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,me,1,6,"app-line",8),t.YNc(2,he,0,0,"ng-template",6),t.qZA()),2&n){const e=t.oxw(2),i=t.MAs(5);t.xp6(1),t.Q6J("ngIf",null==e.dataGraphics?null:e.dataGraphics.length),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}const _e=function(){return{}},de=function(){return{text:"Year Investments",align:"center"}};function ve(n,o){if(1&n&&t._UZ(0,"app-line",11),2&n){const e=t.oxw(3);t.Q6J("dataGraphics",e.dataGraphics)("type","year")("nameLegend","Year Investments")("nameAvg","Average Year")("xAxis",t.DdM(6,_e))("title",t.DdM(7,de))}}function ue(n,o){}function fe(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,ve,1,8,"app-line",10),t.YNc(2,ue,0,0,"ng-template",6),t.qZA()),2&n){const e=t.oxw(2),i=t.MAs(5);t.xp6(1),t.Q6J("ngIf",null==e.dataGraphics?null:e.dataGraphics.length),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}function xe(n,o){}function Ie(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,xe,0,0,"ng-template",6),t.qZA()),2&n){t.oxw(2);const e=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function ye(n,o){}function Ce(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,ye,0,0,"ng-template",6),t.qZA()),2&n){t.oxw(2);const e=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Ze(n,o){if(1&n&&(t.ynx(0),t.YNc(1,ce,3,2,"div",3),t.YNc(2,ge,3,2,"div",3),t.YNc(3,fe,3,2,"div",3),t.YNc(4,Ie,2,1,"div",3),t.YNc(5,Ce,2,1,"div",3),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e.form&&null!=e.form.controls&&null!=e.form.controls.filter&&e.form.controls.filter.value)),t.xp6(1),t.Q6J("ngIf","month"===e.form.controls.filter.value&&e.form.controls.month.value),t.xp6(1),t.Q6J("ngIf","year"===e.form.controls.filter.value&&e.form.controls.year.value),t.xp6(1),t.Q6J("ngIf","date"===e.form.controls.filter.value&&e.form.controls.date.value),t.xp6(1),t.Q6J("ngIf","dates"===e.form.controls.filter.value&&e.form.controls.date1.value&&e.form.controls.date2.value)}}const et=function(){return{text:"Year Category",align:"center"}};function Te(n,o){if(1&n&&t._UZ(0,"app-donut",15),2&n){const e=t.oxw(2);t.Q6J("dataGraphics",e.dataGraphics)("nameLegend","investment")("type","categoryinvestments")("title",t.DdM(4,et))}}function Ae(n,o){if(1&n&&t._UZ(0,"app-donut",16),2&n){const e=t.oxw(2);t.Q6J("dataGraphics",e.dataGraphics)("type","account")("title",t.DdM(3,et))}}function Me(n,o){if(1&n&&(t.TgZ(0,"div",12),t.YNc(1,Te,1,5,"app-donut",13),t.YNc(2,Ae,1,4,"app-donut",14),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.dataGraphics?null:e.dataGraphics.length),t.xp6(1),t.Q6J("ngIf",null==e.dataGraphics?null:e.dataGraphics.length)}}const be=[{path:"",component:ot,canActivate:[at.s],children:[{path:"",component:(()=>{class n{constructor(e){this.utilsInvestments=e,this.form=new c.cw({})}ngOnInit(){this.buildForm()}buildForm(){this.form=this.utilsInvestments.form()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.w))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home-investments"]],decls:4,vars:6,consts:[[1,"px-6","py-5"],[3,"formGroup"],[3,"form"],[3,"showHeader","showLink","showDelete","padding"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"form",1),t._UZ(2,"app-investments-filters",2),t.qZA(),t._UZ(3,"app-investments-person",3),t.qZA()),2&e&&(t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("form",i.form),t.xp6(1),t.Q6J("showHeader",!1)("showLink",!1)("showDelete",!0)("padding",!1))},directives:[c._Y,c.JL,c.sg,Z.I,R.Z],encapsulation:2}),n})()},{path:"create",component:$t},{path:"graphics",component:(()=>{class n{constructor(e,i){this.utils=e,this.store=i,this.form=new c.cw({}),this.loading=!1,this.loaded=!1,this.dataGraphics=[],this.sub=new x.w,this.sub=this.store.select(a=>a).subscribe(a=>{var s,r,l;try{this.loading=null===(s=null==a?void 0:a.investments)||void 0===s?void 0:s.loading,this.loaded=null===(r=null==a?void 0:a.investments)||void 0===r?void 0:r.loaded,this.dataGraphics=[{},...null===(l=null==a?void 0:a.investments)||void 0===l?void 0:l.complete]}catch(m){console.log(m)}})}ngOnInit(){this.buildForm()}buildForm(){this.form=this.utils.form()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.w),t.Y36(I.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-graphics-investments"]],decls:6,vars:4,consts:[[1,"px-6","py-5"],[3,"formGroup"],[3,"form","isFromGraphics"],[4,"ngIf"],["donuts",""],[3,"dataGraphics","nameLegend","nameAvg","title",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"dataGraphics","nameLegend","nameAvg","title"],[3,"dataGraphics","type","nameLegend","nameAvg","title",4,"ngIf"],[3,"dataGraphics","type","nameLegend","nameAvg","title"],[3,"dataGraphics","type","nameLegend","nameAvg","xAxis","title",4,"ngIf"],[3,"dataGraphics","type","nameLegend","nameAvg","xAxis","title"],[1,"grid","grid-cols-2"],[3,"dataGraphics","nameLegend","type","title",4,"ngIf"],[3,"dataGraphics","type","title",4,"ngIf"],[3,"dataGraphics","nameLegend","type","title"],[3,"dataGraphics","type","title"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"form",1),t._UZ(2,"app-investments-filters",2),t.qZA(),t.YNc(3,Ze,6,5,"ng-container",3),t.qZA(),t.YNc(4,Me,3,2,"ng-template",null,4,t.W1O)),2&e&&(t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("form",i.form)("isFromGraphics",!0),t.xp6(1),t.Q6J("ngIf",i.loaded))},directives:[c._Y,c.JL,c.sg,Z.I,d.O5,d.tP,k.y,X.L],encapsulation:2}),n})()},{path:":id/details",component:Et},{path:"categories",component:tt.Z},{path:"categories/create",component:Pt},{path:"by-category/:id",component:oe}]}];let we=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.Bz.forChild(be)],u.Bz]}),n})();var Je=p(8379),Oe=p(881);let De=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,c.u5,c.UX,Je.A0,z.X,we,Oe.m]]}),n})()}}]);
//# sourceMappingURL=719.0cc1510f022dec88f982.js.map